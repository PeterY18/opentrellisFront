name: Heroku Deploy
env:
  branch: jw
  app_name: trellis-landing-page
on:
#   push:
#     branches:
#       - ${{ env.branch }}
  workflow_dispatch:
    inputs:
      home:
        description: 'location'
        required: false
        default: 'The Octoverse'

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Heroku
        run: |
          apt-get update -qy
          apt-get install -y ruby-dev
          gem install dpl
          dpl --provider=heroku --app=trellis-landing-page --api-key=$HEROKU_AUTH_TOKEN

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: akhileshns/heroku-deploy@v3.6.8 # https://github.com/marketplace/actions/deploy-to-heroku
        with:
          heroku_api_key: ${{secrets.HEROKU_AUTH_TOKEN}}
          heroku_app_name: ${{ env.app_name }}
          heroku_email: ${{secrets.HEROKU_EMAIL}}
          usedocker: true
          branch: ${{ env.branch }}
